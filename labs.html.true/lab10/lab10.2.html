
<!DOCTYPE html>
<html>
    <head>
        <title>Page Title</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <table border=2>
            <tr>
                <td onclick="func1()" id = "a"  class="kk" width=100px height=100px></td>
                <td onclick="func2()" id="b" class="kk" width=100px height=100px ></td>
                <td onclick="func3()" id="c" class="kk" width=100px height=100px ></td>
            </tr>
            <tr>
                <td onclick="func4()" id="d" class="kk" width=100px height=100px ></td>
                <td onclick="func5()" id="e" class="kk" width=100px height=100px ></td>
                <td onclick="func6()" id="f" class="kk" width=100px height=100px ></td>
            </tr>
            <tr>
                <td onclick="func7()" id="g" class="kk" width=100px height=100px ></td>
                <td onclick="func8()" id="h" class="kk" width=100px height=100px ></td>
                <td onclick="func9()" id="k" class="kk" width=100px height=100px ></td>
            </tr>
        </table>
         
        <div id="demo" onclick="Xod()">Ход первого</div>
        <div class="line1">Количество побед Х: </div><div class="line1" id="krest">0</div><br>
        <div class="line2">Количество побед О: </div><div class="line2"id ='nolik'>0</div><br>
        <div class="line3">Ничья: </div><div class="line3" id = 'no'>0</div><br>

        <input type="submit" value ="Заново" onclick="ress()"> 
        
        <script type="text/javascript">
            var num = 0;
            var arr= ['X','O'];
            var arr1 = [2, 2, 2, 2, 2, 2, 2, 2, 2]
            var word = ["Ход первого", "Ход второго"];
            var word1 = ["первый(x)", "второй(o)"]
            function ress()
            {
               let cells =  document.getElementsByClassName("kk")
               for (let i =0 ; i !== cells.length ; i ++)
               {
                cells[i].textContent = ''   ;
               }
                for (let i = 0 ; i < 9; i++)
                {
                    arr1[i] = 2;
                }
                
                document.getElementById("a").onclick = func1
                document.getElementById("b").onclick = func2
                document.getElementById("c").onclick = func3
                document.getElementById("d").onclick = func4
                document.getElementById("e").onclick = func5
                document.getElementById("f").onclick = func6
                document.getElementById("g").onclick = func7
                document.getElementById("h").onclick = func8
                document.getElementById("k").onclick = func9

            }            
        	function func1() {
                if(num>1)
                {
                    num=0;
                }

                document.getElementById("a").innerHTML = arr[num]
                arr1[0] = num;
                prov()
                document.getElementById("a").onclick = null ;
                }

            function func2() {
                if(num>1)
                {
                    num=0;
                }
                document.getElementById("b").innerHTML = arr[num]
                arr1[1] = num;
                prov()
                 document.getElementById("b").onclick = null ;
                }
            function func3() {
                if(num>1)
                {
                    num=0;
                }
                document.getElementById("c").innerHTML = arr[num]
                arr1[2] = num;
 
                prov();
                document.getElementById("c").onclick = null ;
                }
            function func4() {
                if(num>1)
                {
                    num=0;
                }
                document.getElementById("d").innerHTML = arr[num]
                arr1[3] = num;
                prov()
                document.getElementById("d").onclick = null ;
                }
            function func5() {
                if(num>1)
                {
                    num=0;
                }
                document.getElementById("e").innerHTML = arr[num]
                arr1[4] = num;
                prov()
                 document.getElementById("e").onclick = null ;
                }
            function func6() {
                if(num>1)
                {
                    num=0;
                }
                document.getElementById("f").innerHTML = arr[num]
                arr1[5] = num;
                prov();
 

                 document.getElementById("f").onclick = null ; 
                }
            function func7() {
                if(num>1)
                {
                    num=0;
                }
                document.getElementById("g").innerHTML = arr[num]
                arr1[6] = num;
                prov();
                 document.getElementById("g").onclick = null ;
                }
            function func8() {
                if(num>1)
                {
                    num=0;
                }
                document.getElementById("h").innerHTML = arr[num];
                arr1[7] = num;
                prov();
                 document.getElementById("h").onclick = null ;
                }
            function func9() {
                if(num>1)
                {
                    num=0;
                }
                document.getElementById("k").innerHTML = arr[num]
                arr1[8] = num;
                prov();
 

                
                 document.getElementById("k").onclick = null ;
                }

            function Xod(){
                if (num > 1){
                    num = 0
                }
                var p = document.getElementById("demo");
                p.innerHTML=word[num]
                }

            function check(){
            if ((arr1[0] == arr1[1]) && (arr1[1] == arr1[2]) && (arr1[0] != 2)){
                return true
            }
            if ((arr1[3] == arr1[4]) && (arr1[4] == arr1[5]) && (arr1[3] != 2)){
                return true
            }
            if ((arr1[6] == arr1[7]) && (arr1[7]== arr1[8]) && (arr1[6] != 2)){
                return true
            }
            if ((arr1[0] == arr1[4]) && (arr1[4] == arr1[8]) && (arr1[0] != 2)){
                return true
            }
            if ((arr1[2] == arr1[4]) && (arr1[4]== arr1[6]) && (arr1[2] != 2)){
                return true
            }
            if ((arr1[0] == arr1[3]) && (arr1[3] == arr1[6]) && (arr1[0] != 2)){
                return true
            }
            if ((arr1[1] == arr1[4]) && (arr1[4] == arr1[7]) && (arr1[1] != 2)){
                return true
            }
            if ((arr1[2] == arr1[5]) && (arr1[5] == arr1[8]) && (arr1[2] != 2)){
                return true
            }
                return false

            }

            function nich() {
            let k= 0;
            for (i = 0 ; i < arr1.length ; i++)
            {
                if (arr1[i] != 2 && check() == false)
                    {
                        k++
                    }
            }
            if (k==9)
            {
                 alert("Ничья")
                 let no = document.getElementById('no');
                 no.innerHTML = parseInt(no.innerHTML)+1;
                        
            }
            }
            function blok (){
                document.getElementById("a").onclick = null
                document.getElementById("b").onclick = null
                document.getElementById("c").onclick = null
                document.getElementById("d").onclick = null
                document.getElementById("e").onclick = null
                document.getElementById("f").onclick = null
                document.getElementById("g").onclick = null
                document.getElementById("h").onclick = null
                document.getElementById("k").onclick = null
            }
            function prov()
            {
                if (check() == true)
                {
                    alert(word1[num] + " победил");
                    blok();
                    if (num == 0)
                    {
                        let krest = document.getElementById('krest');
                        krest.innerHTML = parseInt(krest.innerHTML) + 1;
                    } else if (num == 1)
                    {
                        let nolik = document.getElementById('nolik');
                        nolik.innerHTML = parseInt(nolik.innerHTML)+ 1;
                    }
                }
                num++;
                nich()
                Xod();
 
            }
        </script>
        <style type="text/css">
            td {
                font-size: 50px ;
                text-align: center;
            }
            .line1{
                display: inline;
            }
            .line2{
                display: inline;
            }
            .line3 {
                display: inline;

            }
        </style>
    </body>
</html>

     
   